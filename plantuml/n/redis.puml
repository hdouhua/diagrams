@startuml redis-ha
title reids-sentinel high avaliability

skinparam shadowing false
skinparam node {
	backgroundColor<<redis>> gold
}

frame server1 {
    node "Sentinel1 \nport:30001" <<sentinel>> as s1
    node "Master \nport:8001" <<redis>> as m
}
frame server2 {
    node "Sentinel2\nport:30001" <<sentinel>> as s2
    node "Replica1\nport:8001" <<redis>> as r1
}
frame server3 {
    node "Sentinel3\nport:30001" <<sentinel>> as s3
    node "Replica2\nport:8001" <<redis>> as r2
}

s1 <-[#blue]-> s2
s1 <-[#blue]-> s3
s2 <-[#blue]right-> s3

m -[#lime]-> r1
m -[#lime]-> r2

s1 ..> m
s1 ..> r1
s1 ..> r2

s2 ..> m
s2 ..> r1
s2 ..> r2

s3 ..> m
s3 ..> r1
s3 ..> r2


legend right
    <font color=blue>--></font> Sentinel bus: gossip protocol across all Sentinel nodes
    <font color=lime>--></font> sync data from Redis Master to Replicas
    <font color=DarkRed>--></font> Sentinel monitor all Redis nodes
endlegend

right footer Generated by hdouhua
@enduml