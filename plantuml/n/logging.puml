@startuml logging
title logging system

skinparam componentStyle uml2
skinparam queue {
    backgroundColor<<message queue>> gold
    BorderStyle<<message queue>> dotted
}

package "API Server 1..*" {
    node api <<application>>
    artifact logfile <<storage>>
    node filebeat <<shipper>>
    api -left-> logfile : store
    filebeat -right-> logfile : collect
}

queue MQ <<message queue>>
note bottom of MQ: MQ is optional

node Kibana <<visualization>> as kibana
node "LogStash Cluster" <<transformer>> as logstash
node "ElasticSearch Cluster" <<search-engine>> as elastic

filebeat ..> [MQ] : ship
[MQ] -> logstash : publish
logstash -> elastic : transform \n& store
elastic <- kibana : query & view


right footer Generated by hdouhua
@enduml
